<?xml version="1.0" encoding="UTF-8"?> <!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ffyc.myfirstboot.dao.RoleDao">
    <resultMap id="roleMap" type="Role">
        <id column="id" property="id"></id>
        <id column="name" property="name"></id>
        <id column="mark" property="mark"></id>
        <id column="operatePersonString" property="operatePersonString"></id>
        <id column="operate_time" property="operateTime"></id>
        <collection property="menuList" javaType="list" ofType="Menu" column="id" select="RoleMenuRelation">
            <result column="name" property="name"></result>
        </collection>
    </resultMap>
    <select id="RoleMenuRelation" resultType="Menu">
        SELECT menu.name FROM menu
         LEFT JOIN role_menu ON role_menu.menu_id=menu.id WHERE role_menu.role_id=#{id}
    </select>
    <select id="roleList" resultMap="roleMap" parameterType="Role">
        SELECT r.id,r.name,mark,m.account operatePersonString,r.operate_time
        FROM ROLE r
        LEFT JOIN manage m ON r.operate_person =m.id
    </select>


</mapper>
